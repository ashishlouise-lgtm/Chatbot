<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maa Ambey Furniture | Live AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-stone-50 min-h-screen p-4 text-gray-800">

    <div class="max-w-md mx-auto space-y-6">
        <header class="bg-stone-800 text-white p-6 rounded-2xl text-center shadow-xl">
            <h1 class="text-2xl font-bold">Maa Ambey Furniture üõ†Ô∏è</h1>
            <p class="text-xs opacity-80 italic mt-1">Ajmer's Best AI Furniture Assistant</p>
        </header>

        <div class="bg-white p-6 rounded-2xl shadow-md border-t-4 border-stone-600">
            <h2 class="font-bold mb-4 flex items-center gap-2 text-stone-700">üìä Labor Calculator</h2>
            <div class="space-y-3">
                <select id="itemType" class="w-full p-3 border rounded-xl bg-gray-50 outline-none">
                    <option value="150">Double Bed (‚Çπ150/sqft)</option>
                    <option value="1200">Sofa Set (‚Çπ1200/seat)</option>
                    <option value="250">Wardrobe (‚Çπ250/sqft)</option>
                    <option value="350">Modular Kitchen (‚Çπ350/sqft)</option>
                </select>
                <input type="number" id="sqftInput" placeholder="Enter size/quantity" class="w-full p-3 border rounded-xl outline-none">
                <button onclick="calculateLabor()" class="w-full bg-stone-700 text-white py-3 rounded-xl font-bold hover:bg-stone-800 transition-all">Calculate Cost</button>
                <p id="calcResult" class="text-center text-xl font-black text-stone-800 mt-2"></p>
            </div>
        </div>

        <div class="bg-white p-6 rounded-2xl shadow-md border-t-4 border-orange-400">
            <h2 class="font-bold mb-4 text-stone-700">üí¨ AI Furniture Expert</h2>
            <div id="chatBox" class="h-64 overflow-y-auto mb-4 space-y-3 p-2 text-sm bg-stone-50 rounded-xl border border-stone-100">
                <div class="text-stone-400 italic text-center">Namaste! Main Maa Ambey ka AI assistant hoon. Puchiye...</div>
            </div>
            <div class="flex gap-2">
                <input type="text" id="userInput" placeholder="Ask about designs..." class="flex-1 p-3 border rounded-xl outline-none focus:ring-2 focus:ring-orange-200">
                <button onclick="askAI()" id="sendBtn" class="bg-orange-400 text-white px-5 rounded-xl font-bold shadow-md hover:bg-orange-500 transition-all">Send</button>
            </div>
        </div>
    </div>

    <script type="importmap">
      { "imports": { "@google/generative-ai": "https://esm.run/@google/generative-ai" } }
    </script>
    <script type="module">
      import { GoogleGenerativeAI } from "@google/generative-ai";

      // Aapki Tested Key (AI Studio Verified)
      const API_KEY = "AIzaSyCjjNQy_qNAJetpE-Yt9c8Wt7fMsWqKCf4"; 
      const genAI = new GoogleGenerativeAI(API_KEY);
      
      // Aapki list wala naya stable model
      const model = genAI.getGenerativeModel({ model: "gemini-2.0-flash" });

      window.calculateLabor = () => {
        const rate = document.getElementById('itemType').value;
        const qty = document.getElementById('sqftInput').value;
        const res = document.getElementById('calcResult');
        if(qty > 0) res.innerText = "Total Labor: ‚Çπ" + (rate * qty);
      };

      window.askAI = async () => {
        const input = document.getElementById('userInput');
        const box = document.getElementById('chatBox');
        const btn = document.getElementById('sendBtn');
        
        if (!input.value.trim()) return;

        const text = input.value;
        box.innerHTML += `<div class="text-right"><span class="bg-stone-100 p-2 rounded-lg inline-block self-end max-w-[80%]"><b>Aap:</b> ${text}</span></div>`;
        input.value = '';
        btn.disabled = true;

        try {
          const prompt = "Aap Maa Ambey Furniture, Ajmer ke assistant hain. Polite hindi mein furniture designs, wooden work aur quality ke baare mein jawab dein: " + text;
          const result = await model.generateContent(prompt);
          const response = await result.response;
          const aiText = response.text();
          
          box.innerHTML += `<div class="text-left"><span class="bg-orange-50 p-2 rounded-lg inline-block border border-orange-100 max-w-[80%] text-stone-800"><b>AI:</b> ${aiText}</span></div>`;
        } catch (error) {
          box.innerHTML += `<div class="text-red-500 text-xs italic text-center">Error: ${error.message}</div>`;
        }

        btn.disabled = false;
        box.scrollTop = box.scrollHeight;
      };
    </script>
</body>
</html>
